(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3924735d"],{"3ce3":function(t,e,a){},"41ea":function(t,e,a){},8843:function(t,e,a){"use strict";a("41ea")},"8fbb":function(t,e,a){"use strict";a("3ce3")},ff2e:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-grades"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"max-height":"370"}},[t._l(t.tableProps,(function(t,e){return a("el-table-column",{key:e,attrs:{prop:t.propName,label:t.propLabel,width:t.width,align:2==e?"left":"center","class-name":"text-style"}})})),a("el-table-column",{attrs:{fixed:"right",label:"Operations",width:"230"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"warning",icon:"el-icon-edit"},nativeOn:{click:function(a){return a.preventDefault(),t.operationAction("Edit",t.tableData[e.$index])}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},nativeOn:{click:function(a){return a.preventDefault(),t.operationAction("Delete",t.tableData[e.$index])}}})]}}])})],2),a("el-dialog",{attrs:{title:"Delete Attendance",visible:t.showDeleteAttendance,width:"20%","show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1,top:"50px"},on:{"update:visible":function(e){t.showDeleteAttendance=e}}},[a("span",[t._v("Are you sure you want to delete?")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.showDeleteAttendance=!1}}},[t._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.deleteData()}}},[t._v("Delete")])],1)]),t.showUpdateAttendance?a("UpdateAttendance",{attrs:{studentData:t.studentData,showUpdateAttendance:t.showUpdateAttendance},on:{updateData:t.updateData,closeUpdateAttendance:function(e){return t.closeUpdateAttendance(e)}}}):t._e()],1)},s=[],i=[{propName:"AttendanceDate",propLabel:"Date",width:"120"},{propName:"Code",propLabel:"Subject",width:"200"},{propName:"ScheduleTimeStart",propLabel:"Time Start",width:"200"},{propName:"ScheduleTimeEnd",propLabel:"Time End",width:"200"},{propName:"RemarksID",propLabel:"Remarks",width:"120"}],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{visible:t.showUpdateAttendance,"show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1,top:"50px",width:"600px"},on:{"update:visible":function(e){t.showUpdateAttendance=e}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Update Attendance ")]},proxy:!0}])},[a("div",{staticClass:"add-course-content"},[a("el-form",{ref:"ruleForm",staticClass:"add-dialog-form",attrs:{"label-position":"left","label-width":"130px","status-icon":"",rules:t.rules}},[a("el-divider",{attrs:{"content-position":"left"}},[t._v("Attendance Details")]),a("div",{staticClass:"form-item-account-details"},[a("el-form-item",{attrs:{label:"Date:"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"Pick a day"},model:{value:t.AttendanceDate,callback:function(e){t.AttendanceDate=e},expression:"AttendanceDate"}})],1),a("el-form-item",{attrs:{label:"Day:",prop:"currGrade"}},[a("span",[t._v(t._s(t.Day))])]),a("el-form-item",{attrs:{label:"Subject:"}},[a("el-dropdown",{attrs:{trigger:"click"},on:{command:t.selectSubject}},[a("el-button",{attrs:{type:"primary"}},[t._v(" "+t._s(t.currentSubject)+" "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.subjectList,(function(e,n){return a("el-dropdown-item",{key:n,attrs:{command:e}},[t._v(" "+t._s(e.SubjectID)+" ")])})),1)],1)],1),a("el-form-item",{attrs:{label:"Start Time:",prop:"currGrade"}},[a("span",[t._v(t._s(t.StartTime))])]),a("el-form-item",{attrs:{label:"End Time:",prop:"currGrade"}},[a("span",[t._v(t._s(t.EndTime))])]),a("el-form-item",{attrs:{label:"Remarks:"}},[a("el-dropdown",{attrs:{trigger:"click"},on:{command:t.selectRemark}},[a("el-button",{attrs:{type:"primary"}},[t._v(" "+t._s(t.currentRemark)+" "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.remarkList,(function(e,n){return a("el-dropdown-item",{key:n,attrs:{command:e}},[t._v(" "+t._s(e.Remarks)+" ")])})),1)],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeDialog}},[t._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.save()}}},[t._v("Update")])],1)])},c=[],o=(a("99af"),a("4de4"),a("ac1f"),a("1276"),a("96cf"),a("1da1")),l={components:{},data:function(){var t=function(t,e,a){""===e?a(new Error("Please input the grade")):a()};return{value1:[new Date,new Date],rules:{currGrade:[{validator:t,trigger:"blur"}]},ScheduleID:"",RemarksID:"",AttendanceDate:"",Day:"",StartTime:"",EndTime:"",currentSubject:"---Select---",currentRemark:"---Select---",subjectList:[],dayList:[],remarkList:[]}},methods:{closeDialog:function(){this.currentSubject="---Select---",this.currentRemark="---Select---",this.$emit("closeUpdateAttendance",!1),this.$emit("updateData")},selectSubject:function(t){this.currentSubject=t.SubjectID,this.ScheduleID=t.ID,this.StartTime=t.ScheduleTimeStart,this.EndTime=t.ScheduleTimeEnd},selectRemark:function(t){this.currentRemark=t.Remarks,this.RemarksID=t.ID},save:function(){var t=this;if(""==this.studentData.AttendanceDate)this.$message({type:"warning",message:"Select Date!"});else if(""==this.studentData.ScheduleID)this.$message({type:"warning",message:"Select Subject!"});else if(""==this.studentData.RemarksID)this.$message({type:"warning",message:"Select Remarks!"});else{var e={request:4,data:{ID:this.studentData.ID,ScheduleID:this.ScheduleID,RemarksID:this.parseRemarks(this.currentRemark),AttendanceDate:void 0===this.AttendanceDate.length?this.formatDate(this.AttendanceDate):this.AttendanceDate,AccountID:this.studentData.AccountID}};this.http.post(this.api.AttendanceService,e).then((function(e){1==e.data.State?(t.$emit("updateData"),t.$message({type:"success",message:e.data.Message})):t.$message({type:"warning",message:e.data.Message})})).catch((function(t){console.log(t)}))}},parseRemarks:function(t){var e=this.remarkList.filter((function(e){if(e.Remarks==t)return e}))[0].ID;return e},parseTime:function(t){var e=t,a=t.split(":");return a[0]>12?e+" PM":e+" AM"},formatDate:function(t){var e=t.getFullYear(),a=t.getMonth()+1>10?t.getMonth()+1:"0"+(t.getMonth()+1),n=t.getDate()>10?t.getDate():"0"+t.getDate();return"".concat(e,"-").concat(a,"-").concat(n)},getDay:function(t){var e=this,a={request:9,data:{ID:t}};this.http.post(this.api.ScheduleService,a).then((function(t){e.dayList=t.data,e.Day=e.dayList[0].Day})).catch((function(t){console.log(t)}))},getSchedule:function(t){var e=this,a={request:8,data:{AccountID:this.studentData.AccountID,ScheduleDayID:t}};this.http.post(this.api.ScheduleService,a).then((function(t){e.subjectList=t.data})).catch((function(t){console.log(t)}))},getRemarks:function(){var t=this,e={request:8,data:{}};this.http.post(this.api.AttendanceService,e).then((function(e){t.remarkList=e.data})).catch((function(t){console.log(t)}))},resetFields:function(){this.ScheduleID="",this.RemarksID="",this.AttendanceDate="",this.Day="",this.StartTime="",this.EndTime="",this.currentSubject="---Select---",this.currentRemark="---Select---"}},watch:{AttendanceDate:function(t){if(t&&void 0==t.length){var e=t.getDay();this.getDay(e),this.getSchedule(e),this.StartTime="",this.EndTime="",this.currentSubject="---Select---"}}},props:{showUpdateAttendance:{type:Boolean,default:!1},studentData:{type:Object,default:function(){return{}}}},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getRemarks();case 2:case"end":return e.stop()}}),e)})))()},mounted:function(){this.currentRemark=this.studentData.RemarksID,this.currentSubject=this.studentData.Code,this.AttendanceDate=this.studentData.AttendanceDate,this.StartTime=this.studentData.ScheduleTimeStart,this.EndTime=this.studentData.ScheduleTimeEnd,this.getDay(this.studentData.ScheduleDayID),this.getSchedule(this.studentData.ScheduleDayID),console.log(this.studentData)}},d=l,u=(a("8843"),a("2877")),h=Object(u["a"])(d,r,c,!1,null,null,null),p=h.exports,m={components:{UpdateAttendance:p},data:function(){return{tableProps:i,studentData:{},showDeleteAttendance:!1,showUpdateAttendance:!1}},methods:{operationAction:function(t,e){switch(this.studentData={},this.studentData=e,t){case"Edit":this.showUpdateAttendance=!0;break;case"Delete":this.showDeleteAttendance=!0;break;default:console.log("Invalid Option")}},deleteData:function(){var t=this,e={request:5,data:{ID:this.studentData.ID}};this.http.post(this.api.AttendanceService,e).then((function(e){1==e.data.State?(t.showDeleteAttendance=!1,t.$emit("updateData"),t.$message({type:"success",message:e.data.Message})):t.$message({type:"warning",message:e.data.Message})})).catch((function(t){console.log(t)}))},updateData:function(){this.$emit("updateData")},closeUpdateAttendance:function(t){this.showUpdateAttendance=t}},props:{tableData:{type:Array,default:function(){return[]}}},created:function(){},mounted:function(){}},D=m,f=(a("8fbb"),Object(u["a"])(D,n,s,!1,null,null,null));e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-3924735d.6da376ec.js.map