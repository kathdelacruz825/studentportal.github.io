(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d52a3aa"],{"08d4":function(t,e,n){},"130c":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"settings"},[n("Nav",{attrs:{title:t.pageTitle,isLeftArrow:!1,isRightText:!1}}),n("div",{staticClass:"content"},[n("div",{staticClass:"user-info"},[n("div",{staticClass:"user-icon"},[n("van-image",{attrs:{width:"100",height:"100",fit:"fill",src:t.userDetails.Icon},on:{click:function(e){t.showUpload=!0}}})],1),n("div",{staticClass:"user-details"},[""!=t.userDetails.ExtName?n("span",[t._v("Name: "+t._s(t.userDetails.FirstName+" "+t.userDetails.MiddleName+" "+t.userDetails.LastName+", "+t.userDetails.ExtName)+" ")]):t._e(),""==t.userDetails.ExtName?n("span",[t._v("Name: "+t._s(t.userDetails.FirstName+" "+t.userDetails.MiddleName+" "+t.userDetails.LastName)+" ")]):t._e(),1==t.userDetails.AccountType?n("span",[t._v("Course: "+t._s(t.userDetails.Course))]):t._e(),1==t.userDetails.AccountType?n("span",[t._v("Year: "+t._s(t.userDetails.YearLevel))]):t._e()])]),n("div",{staticClass:"links"},[1==t.userDetails.AccountType?n("van-cell-group",[n("van-cell",{attrs:{icon:"manager-o",title:"View Parent Information","is-link":"",to:{name:"ParentInfo"}}}),n("van-cell",{attrs:{icon:"edit",title:"Edit Information","is-link":"",to:{name:"EditInfo"}}}),n("van-cell",{attrs:{icon:"records",title:"Change Password","is-link":"",to:{name:"ChangePassword"}}}),n("van-cell",{attrs:{icon:"info-o",title:"About","is-link":"",to:{name:"About"}}})],1):t._e(),2==t.userDetails.AccountType?n("van-cell-group",[n("van-cell",{attrs:{icon:"manager-o",title:"View Child Information","is-link":"",to:{name:"ChildInfoView"}}}),n("van-cell",{attrs:{icon:"edit",title:"Edit Information","is-link":"",to:{name:"EditInfo"}}}),n("van-cell",{attrs:{icon:"records",title:"Change Password","is-link":"",to:{name:"ChangePassword"}}}),n("van-cell",{attrs:{icon:"info-o",title:"About","is-link":"",to:{name:"About"}}})],1):t._e()],1),n("div",{staticClass:"logout-btn"},[n("van-button",{attrs:{type:"danger",round:"",size:"normal"},on:{click:function(e){return t.logout()}}},[t._v(" Logout ")])],1)]),n("van-action-sheet",{attrs:{"cancel-text":"Cancel"},on:{cancel:t.onCancel},model:{value:t.showUpload,callback:function(e){t.showUpload=e},expression:"showUpload"}},[n("van-cell-group",[n("div",{staticClass:"upload-line"},[n("van-uploader",{attrs:{"after-read":t.uploadImage,"max-count":1}},[n("van-cell",{attrs:{title:"Select from album"}})],1)],1),n("div",[n("van-uploader",{attrs:{capture:"camera","after-read":t.uploadImage,accept:"image/png,image/jpeg"}},[n("van-cell",{attrs:{title:"Take Picture"}})],1)],1)])],1),n("Footer",{attrs:{activeItem:1===Number(t.userDetails.AccountType)?2:3}})],1)},o=[],r=(n("96cf"),n("1da1")),s=n("71a8"),i=n("2f35"),c=n("d399"),l={name:"Settings",components:{Nav:s["a"],Footer:i["a"]},data:function(){return{pageTitle:"Settings",showUpload:!1,userDetails:{}}},methods:{logout:function(){this.$store.dispatch("setLogin",!1),localStorage.removeItem("user"),this.$router.push({name:"UserLogin"})},uploadImage:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a={request:"1"==e.userDetails.AccountType?7:14,data:{ID:e.userDetails.ID,Icon:t.content}},n.next=3,e.http.post("1"==e.userDetails.AccountType?e.api.StudentService:e.api.ParentService,a).then((function(t){console.log(t),e.showUpload=!1,1==t.data.State&&e.login()})).catch((function(t){Object(c["a"])("Connection Error"),console.log(t)}));case 3:case"end":return n.stop()}}),n)})))()},login:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={request:2,data:{AccountID:t.userDetails.AccountID,AccountPassword:t.userDetails.AccountPassword}},e.next=3,t.http.post("1"==t.userDetails.AccountType?t.api.StudentService:t.api.ParentService,n).then((function(e){e.data.length>0?(t.$store.dispatch("setUserDetails",e.data[0]),localStorage.setItem("user",JSON.stringify(e.data[0])),t.userDetails=JSON.parse(localStorage.getItem("user"))):Object(c["a"])("Connection Error")})).catch((function(t){Object(c["a"])("Connection Error"),console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},onCancel:function(){this.showUpload=!1}},computed:{},created:function(){this.userDetails=JSON.parse(localStorage.getItem("user"))}},u=l,f=n("2877"),p=Object(f["a"])(u,a,o,!1,null,null,null);e["default"]=p.exports},"196d":function(t,e,n){},"1be43":function(t,e,n){"use strict";n("196d")},"2f35":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"footer"},[n("van-tabbar",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.footerItems[t.userDetails.AccountType],(function(e,a){return n("van-tabbar-item",{key:a,attrs:{icon:e.icon},on:{click:function(n){return t.goPage(e.link)}}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)},o=[],r=(n("b0c0"),n("a9e3"),{name:"Footer",components:{},data:function(){return{active:0,userDetails:{},footerItems:{0:[],1:[{name:"Home",icon:"home-o",link:"UserHome"},{name:"Class",icon:"notes-o",link:"Class"},{name:"Settings",icon:"setting-o",link:"Settings"}],2:[{name:"Home",icon:"home-o",link:"UserHome"},{name:"Class",icon:"notes-o",link:"Class"},{name:"Message",icon:"comment-o",link:"MessageList"},{name:"Settings",icon:"setting-o",link:"Settings"}]}}},props:{activeItem:{type:Number,default:0}},methods:{goPage:function(t){this.$route.name!=t&&this.$router.push({name:t})}},computed:{},mounted:function(){this.userDetails=JSON.parse(localStorage.getItem("user")),this.active=this.activeItem}}),s=r,i=(n("1be43"),n("2877")),c=Object(i["a"])(s,a,o,!1,null,null,null);e["a"]=c.exports},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var a=n("1d80"),o=n("5899"),r="["+o+"]",s=RegExp("^"+r+r+"*"),i=RegExp(r+r+"*$"),c=function(t){return function(e){var n=String(a(e));return 1&t&&(n=n.replace(s,"")),2&t&&(n=n.replace(i,"")),n}};t.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(t,e,n){var a=n("861d"),o=n("d2bb");t.exports=function(t,e,n){var r,s;return o&&"function"==typeof(r=e.constructor)&&r!==n&&a(s=r.prototype)&&s!==n.prototype&&o(t,s),t}},"71a8":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"nav"},[n("van-nav-bar",{attrs:{title:t.title,"left-text":t.isLeftArrow?"Back":"","right-text":t.isRightText?"Logout":"","left-arrow":t.isLeftArrow},on:{"click-left":t.onClickLeft,"click-right":t.logout}})],1)},o=[],r={name:"Nav",components:{},data:function(){return{}},props:{title:{type:String,default:""},isLeftArrow:{type:Boolean,default:!1},isRightText:{type:Boolean,default:!1},showRefresh:{type:Boolean,default:!1}},methods:{onClickLeft:function(){this.$router.go(-1)},logout:function(){this.$router.push({name:"UserLogin"})},refresh:function(){console.log("test")}}},s=r,i=(n("dcff"),n("2877")),c=Object(i["a"])(s,a,o,!1,null,null,null);e["a"]=c.exports},a9e3:function(t,e,n){"use strict";var a=n("83ab"),o=n("da84"),r=n("94ca"),s=n("6eeb"),i=n("5135"),c=n("c6b6"),l=n("7156"),u=n("c04e"),f=n("d039"),p=n("7c73"),d=n("241c").f,m=n("06cf").f,g=n("9bf2").f,v=n("58a8").trim,h="Number",I=o[h],b=I.prototype,N=c(p(b))==h,w=function(t){var e,n,a,o,r,s,i,c,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=v(l),e=l.charCodeAt(0),43===e||45===e){if(n=l.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:a=2,o=49;break;case 79:case 111:a=8,o=55;break;default:return+l}for(r=l.slice(2),s=r.length,i=0;i<s;i++)if(c=r.charCodeAt(i),c<48||c>o)return NaN;return parseInt(r,a)}return+l};if(r(h,!I(" 0o1")||!I("0b1")||I("+0x1"))){for(var k,C=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof C&&(N?f((function(){b.valueOf.call(n)})):c(n)!=h)?l(new I(w(e)),n,C):w(e)},D=a?d(I):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),A=0;D.length>A;A++)i(I,k=D[A])&&!i(C,k)&&g(C,k,m(I,k));C.prototype=b,b.constructor=C,s(o,h,C)}},b0c0:function(t,e,n){var a=n("83ab"),o=n("9bf2").f,r=Function.prototype,s=r.toString,i=/^\s*function ([^ (]*)/,c="name";a&&!(c in r)&&o(r,c,{configurable:!0,get:function(){try{return s.call(this).match(i)[1]}catch(t){return""}}})},dcff:function(t,e,n){"use strict";n("08d4")}}]);
//# sourceMappingURL=chunk-6d52a3aa.b7929bac.js.map